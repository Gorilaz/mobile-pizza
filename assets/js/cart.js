/** * Created with JetBrains PhpStorm. * User: gabi * Date: 10/7/13 * Time: 2:57 PM * To change this template use File | Settings | File Templates. */function cotinue_button(){    var empty_cart = $('#cart-page #continue').data('continue');    var logged = $('#cart-page #continue').data('logged');    if(empty_cart == 'yes' && logged == 'yes'){        alert('continue');        $('#cart-page #popup-pay').popup('open');//        $('#cart-page #start-dialog-pay').click();//        window.location.href = '//' + location.host + '/checkout';    } else if(empty_cart == 'no') {        $('#cart-page #popup-continue').popup("open");    } else if(logged == 'no'){//        $('#cart-page #popup-logged').popup("open");        window.location.href = '//' + location.host + '/account/login_checkout';    }}$(document).on('click','.payment',function(){       var el = $(this).data('payment');       $('#cart-page #payment').val(el);//       $('#cart-page #popup-pay').popup('close');//       $('#cart-page #popup-pickup').popup('open');//    var popup2 = ' <div data-role="header" data-theme="a" class="ui-corner-top">' +//                       '<h1></h1>' +//                   '</div>' +//        '          <div data-role="content" data-theme="pizza-popup" class="ui-corner-bottom ui-content">' +//                       '<h3 class="ui-title">Delivery or in-Store pickup?</h3>' +//                       '<a href="#" data-role="button" data-payment="delivery" data-inline="true" data-rel="back" data-theme="b" data-go="no" class="pickup">Delivery</a>' +//                       '<a href="#" data-role="button" data-payment="pickup" data-inline="true" data-rel="back" data-transition="flow" data-theme="b" data-go="no" class="pickup">In-Store Pickup</a>' +//                   '</div>';//    $('#cart-page #popup-pay').html(popup2);    var html = '<div data-role="popup" id="aaaa" class="ui-popup ui-overlay-shadow ui-corner-all ui-body-c">' +                    '<div data-role="header" data-theme="a" class="ui-corner-top ui-header ui-bar-a" role="banner">' +                        '<h1 class="ui-title" role="heading" aria-level="1">' +'</h1>' +                    '</div>' +                    '<div data-role="content" data-theme="pizza-popup" class="ui-corner-bottom ui-content ui-body-pizza-popup" role="main">' +                        '<h3 class="ui-title">How would you like to pay?</h3>' +                        '<div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="b" data-inline="true" data-disabled="false" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-b" aria-disabled="false">' +                            '<span class="ui-btn-inner"><span class="ui-btn-text">On Delivery</span></span>' +                            '<button data-payment="cash" data-inline="true" data-theme="b" data-go="no" class="payment ui-btn-hidden" data-disabled="false">On Delivery</button>' +                        '</div>' +                        '<div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="b" data-inline="true" data-disabled="false" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-b" aria-disabled="false">' +                            '<span class="ui-btn-inner"><span class="ui-btn-text">Credit Card</span></span>' +                            '<button data-payment="credit" data-inline="true"  data-transition="flow" data-theme="b" data-go="no" class="payment ui-btn-hidden" data-disabled="false">Credit Card</button>' +                        '</div>' +                    '</div>' +                '</div>';    $('#cart-page #popup-pay-popup').html(html);//    $('#cart-page #start-dialog-delivery').click();   });$(document).on('click','.delivery',function(){    var el = $(this).data('delivery');    $('#cart-page #pickup').val(el);    alert('asad');    $('#cart-page #start-dialog-delivery').click();});$(document).on('click','.when',function(){    var el = $(this).data('delivery');    $('#cart-page #pickup').val(el);    alert('asad');    $('#cart-page #start-dialog-delivery').click();});function reorder(id) {    $('#order-page #popup-confirm').popup( 'open');    $('#order-page #popup-confirm').find('a[data-go]').bind('click',function(){        if ($(this).data('go') == 'yes') {            jQuery.ajax({                url: '//' + location.host + '/cart-manage/reorder/' + id,                type: "POST",                success: function(result)                {                    $.mobile.hidePageLoadingMsg();                    result = $.parseJSON(result);                    if (result.redirect) {                        window.location.href = result.redirect;                    } else {                        window.location.reload();                    }                },                error: function(e){                    $.mobile.hidePageLoadingMsg();                    console.error(e);                }            });        }    });}function confirm_delete(el) {    var $el = $(el);    $('#cart-page #popup-confirm').find('.ui-title').eq(1).html(        ($('#cart-page #popup-confirm').find('.ui-title').eq(1).html()).replace('{item_name}', $el.data('item-name'))    );    $('#cart-page #popup-confirm').popup( 'open');    $('#cart-page #popup-confirm').find('a[data-go]').unbind('click');    $('#cart-page #popup-confirm').find('a[data-go]').bind('click',function(){        if ($(this).data('go') == 'yes') {            jQuery.ajax({                url:'//' + location.host +  '/cart-manage/delete/' + $el.data('item-id'),                type: "POST",                success: function(result)                {                    $.mobile.hidePageLoadingMsg();                    result = $.parseJSON(result);                    if (result.redirect) {                        window.location.href = result.redirect;                    } else {//                        window.location.reload();                        window.location.href = '//' + location.host +  '/cart';                    }                },                error: function(e){                    $.mobile.hidePageLoadingMsg();                    console.error(e);                }            });        }    });}